import{j as o,F as a,a as n,r as h,I as x,b as m,aE as f}from"./index.57bc95c5.js";import{I as W}from"./InfoBox.59ccfafe.js";import{S as g}from"./Spinner.c39aca91.js";import{V as j}from"./VinmonopoletModal.bb92edb7.js";import{T as v}from"./Title.6637844d.js";import{W as b}from"./WineListItem.2c8e76a5.js";import{d as I,b as p,a as L,v as S,L as T}from"./vinmonopolet.d46070d2.js";import{T as N}from"./Trash.esm.8068837d.js";import"./Info.esm.14860b3f.js";import"./Link.esm.6f67bc97.js";import"./radio-group.f6f390ad.js";var u=new Map;u.set("bold",function(e){return o(a,{children:[n("path",{d:"M138.7,175.5l-19.2,52.1a8,8,0,0,1-15,0L85.3,175.5a8.1,8.1,0,0,0-4.8-4.8L28.4,151.5a8,8,0,0,1,0-15l52.1-19.2a8.1,8.1,0,0,0,4.8-4.8l19.2-52.1a8,8,0,0,1,15,0l19.2,52.1a8.1,8.1,0,0,0,4.8,4.8l52.1,19.2a8,8,0,0,1,0,15l-52.1,19.2A8.1,8.1,0,0,0,138.7,175.5Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),n("line",{x1:"176",y1:"16",x2:"176",y2:"64",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),n("line",{x1:"200",y1:"40",x2:"152",y2:"40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),n("line",{x1:"224",y1:"72",x2:"224",y2:"104",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),n("line",{x1:"240",y1:"88",x2:"208",y2:"88",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"})]})});u.set("duotone",function(e){return o(a,{children:[n("path",{d:"M138.7,175.5l-19.2,52.1a8,8,0,0,1-15,0L85.3,175.5a8.1,8.1,0,0,0-4.8-4.8L28.4,151.5a8,8,0,0,1,0-15l52.1-19.2a8.1,8.1,0,0,0,4.8-4.8l19.2-52.1a8,8,0,0,1,15,0l19.2,52.1a8.1,8.1,0,0,0,4.8,4.8l52.1,19.2a8,8,0,0,1,0,15l-52.1,19.2A8.1,8.1,0,0,0,138.7,175.5Z",opacity:"0.2"}),n("path",{d:"M138.7,175.5l-19.2,52.1a8,8,0,0,1-15,0L85.3,175.5a8.1,8.1,0,0,0-4.8-4.8L28.4,151.5a8,8,0,0,1,0-15l52.1-19.2a8.1,8.1,0,0,0,4.8-4.8l19.2-52.1a8,8,0,0,1,15,0l19.2,52.1a8.1,8.1,0,0,0,4.8,4.8l52.1,19.2a8,8,0,0,1,0,15l-52.1,19.2A8.1,8.1,0,0,0,138.7,175.5Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"176",y1:"16",x2:"176",y2:"64",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"200",y1:"40",x2:"152",y2:"40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"224",y1:"72",x2:"224",y2:"104",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"240",y1:"88",x2:"208",y2:"88",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]})});u.set("fill",function(){return n(a,{children:n("path",{d:"M208.9,144a15.8,15.8,0,0,1-10.5,15l-52.2,19.2L127,230.4a16,16,0,0,1-30,0L77.8,178.2,25.6,159a16,16,0,0,1,0-30l52.2-19.2L97,57.6a16,16,0,0,1,30,0l19.2,52.2L198.4,129A15.8,15.8,0,0,1,208.9,144ZM152,48h16V64a8,8,0,0,0,16,0V48h16a8,8,0,0,0,0-16H184V16a8,8,0,0,0-16,0V32H152a8,8,0,0,0,0,16Zm88,32h-8V72a8,8,0,0,0-16,0v8h-8a8,8,0,0,0,0,16h8v8a8,8,0,0,0,16,0V96h8a8,8,0,0,0,0-16Z"})})});u.set("light",function(e){return o(a,{children:[n("path",{d:"M138.7,175.5l-19.2,52.1a8,8,0,0,1-15,0L85.3,175.5a8.1,8.1,0,0,0-4.8-4.8L28.4,151.5a8,8,0,0,1,0-15l52.1-19.2a8.1,8.1,0,0,0,4.8-4.8l19.2-52.1a8,8,0,0,1,15,0l19.2,52.1a8.1,8.1,0,0,0,4.8,4.8l52.1,19.2a8,8,0,0,1,0,15l-52.1,19.2A8.1,8.1,0,0,0,138.7,175.5Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),n("line",{x1:"176",y1:"16",x2:"176",y2:"64",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),n("line",{x1:"200",y1:"40",x2:"152",y2:"40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),n("line",{x1:"224",y1:"72",x2:"224",y2:"104",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),n("line",{x1:"240",y1:"88",x2:"208",y2:"88",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"})]})});u.set("thin",function(e){return o(a,{children:[n("path",{d:"M138.7,175.5l-19.2,52.1a8,8,0,0,1-15,0L85.3,175.5a8.1,8.1,0,0,0-4.8-4.8L28.4,151.5a8,8,0,0,1,0-15l52.1-19.2a8.1,8.1,0,0,0,4.8-4.8l19.2-52.1a8,8,0,0,1,15,0l19.2,52.1a8.1,8.1,0,0,0,4.8,4.8l52.1,19.2a8,8,0,0,1,0,15l-52.1,19.2A8.1,8.1,0,0,0,138.7,175.5Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),n("line",{x1:"176",y1:"16",x2:"176",y2:"64",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),n("line",{x1:"200",y1:"40",x2:"152",y2:"40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),n("line",{x1:"224",y1:"72",x2:"224",y2:"104",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),n("line",{x1:"240",y1:"88",x2:"208",y2:"88",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"})]})});u.set("regular",function(e){return o(a,{children:[n("path",{d:"M138.7,175.5l-19.2,52.1a8,8,0,0,1-15,0L85.3,175.5a8.1,8.1,0,0,0-4.8-4.8L28.4,151.5a8,8,0,0,1,0-15l52.1-19.2a8.1,8.1,0,0,0,4.8-4.8l19.2-52.1a8,8,0,0,1,15,0l19.2,52.1a8.1,8.1,0,0,0,4.8,4.8l52.1,19.2a8,8,0,0,1,0,15l-52.1,19.2A8.1,8.1,0,0,0,138.7,175.5Z",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"176",y1:"16",x2:"176",y2:"64",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"200",y1:"40",x2:"152",y2:"40",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"224",y1:"72",x2:"224",y2:"104",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),n("line",{x1:"240",y1:"88",x2:"208",y2:"88",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})]})});var M=function(t,r){return m(t,r,u)},y=h.exports.forwardRef(function(e,t){return n(x,{...Object.assign({ref:t},e,{renderPath:M})})});y.displayName="Sparkle";const A=y,E=f.injectEndpoints({endpoints:e=>({getWishlist:e.query({query:()=>({url:"wishlist",method:"GET"}),providesTags:t=>t?[...t.map(({id:r})=>({type:"Wishlist",id:r})),{type:"Wishlist",id:"LIST"}]:[{type:"Wishlist",id:"LIST"}]}),deleteWishlistItem:e.mutation({query(t){return{url:`/wishlist/${t}`,method:"DELETE"}},invalidatesTags:(t,r,d)=>[{type:"Wishlist",id:d}]}),addWishlistItem:e.mutation({query(t){return{url:"/wishlist",method:"POST",body:t}},invalidatesTags:[{type:"Wishlist",id:"LIST"}]})})}),{useGetWishlistQuery:C,useAddWishlistItemMutation:V,useDeleteWishlistItemMutation:Z}=E,P=({items:e})=>{const[t,{isLoading:r,isSuccess:d,isError:s}]=Z(),c=async i=>{await t(i).unwrap().then(l=>console.log(l)).catch(l=>console.log(l))};return n("ul",{className:"flex-1 p-4 block-less-muted space-y-2",children:e.map(i=>o(b,{name:i.name,pictureUrl:i.pictureUrl,externalLink:!0,to:I(i.productId),children:[o("div",{className:"flex-1 mb-2 text-sm flex items-center gap-2 comma",children:[n("p",{children:i.type}),i.country&&n("p",{children:i.country}),!!i.price&&n("p",{children:p(i.price)}),!!i.alcoholContent&&n("p",{children:L(i.alcoholContent)})]}),o("button",{disabled:r,onClick:()=>c(i.id),className:"btn-white flex flex-row items-center gap-x-2 py-1.5 w-auto disabled:opacity-50 disabled:cursor-not-allowed",children:[n(N,{size:"1.5rem",weight:"duotone",className:"text-wine-500 dark:text-wine-400"}),"Slett"]})]},i.id))})},D=({wine:e,setWine:t})=>{const[r,{isLoading:d,isSuccess:s,isError:c}]=V();if(!e)return null;const i=async()=>{if(!e.productId)return;const l={name:e.name,productId:e.productId,type:e.type,alcoholContent:e.alcoholContent,country:e.country,price:e.price};await r(l).unwrap().then(k=>console.log(k)).catch(k=>console.error(k)),t(null)};return o("div",{className:"p-4 bg-white block-muted text-center basis-96",children:[n("h3",{className:"font-bold text-blue-wine-500 dark:text-blue-wine-25 mb-2",children:e.name}),n("img",{className:"object-scale-down mx-auto pointer-events-none select-none rounded w-36 h-36",src:S(e.productId,200),alt:`Bilde av en vin: ${e.name}`}),o("div",{className:"grid text-muted my-3 grid-cols-2 gap-2",children:[n("p",{children:e.type}),n("p",{children:L(e.alcoholContent)}),n("p",{children:e.country}),n("p",{children:p(e.price)})]}),n(T,{loading:d,disabled:!e,onClick:i,loadingText:"Legger til vin...",className:"w-full justify-center",children:"Legg til"})]})},J=()=>{const[e,t]=h.exports.useState(!1),[r,d]=h.exports.useState(null),{data:s,isLoading:c,isSuccess:i}=C(),l=!!(s!=null&&s.length);return o(a,{children:[n(j,{isWishlist:!0,setValues:d,isOpen:e,setIsOpen:t}),o("div",{className:"space-y-4",children:[n(v,{title:"\xD8nskeliste",Icon:A,border:!0,children:n("p",{children:"Her kan du legge til vin i egen \xF8nskeliste. Du kan max ha 10 vin i \xF8nskelisten."})}),n("button",{type:"button",onClick:()=>t(!0),disabled:c||s!=null&&(s==null?void 0:s.length)>=10,className:"btn-secondary w-full h-12 rounded-full disabled-btn",children:"Hent vin"}),c?n(g,{text:"Laster..."}):o(a,{children:[!l&&n(W,{message:" Du har ingen vin i \xF8nskelisten. Trykk p\xE5 hent vin for \xE5 legge til en vin."}),o("div",{className:"flex gap-4 items-start flex-row",children:[n(D,{setWine:d,wine:r}),l&&n(P,{items:s})]})]})]})]})};export{J as default};
