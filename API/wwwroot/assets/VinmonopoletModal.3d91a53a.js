import{R as e,r as o,I as H,a as F,aB as M}from"./index.3caeb1f1.js";import{L as D,M as S}from"./vinmonopolet.dcb5849d.js";import{L as C}from"./Link.esm.f25f75f4.js";import{j as h,C as P}from"./radio-group.cd2df7e1.js";var l=new Map;l.set("bold",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))});l.set("duotone",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});l.set("fill",function(){return e.createElement(e.Fragment,null,e.createElement("path",{d:"M80.3,115.7a8.2,8.2,0,0,1-1.7-8.7,8,8,0,0,1,7.4-5h34V40a8,8,0,0,1,16,0v62h34a8,8,0,0,1,7.4,5,8.2,8.2,0,0,1-1.7,8.7l-42,42a8.2,8.2,0,0,1-11.4,0ZM216,144a8,8,0,0,0-8,8v56H48V152a8,8,0,0,0-16,0v56a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A8,8,0,0,0,216,144Z"}))});l.set("light",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))});l.set("thin",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))});l.set("regular",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});var q=function(r,a){return F(r,a,l)},b=o.exports.forwardRef(function(t,r){return e.createElement(H,Object.assign({ref:r},t,{renderPath:q}))});b.displayName="DownloadSimple";const A=b,$=M.injectEndpoints({endpoints:t=>({getVinmonopoletCountries:t.query({query:()=>"vinmonopolet/countries"}),getVinmonopoletWine:t.query({query:r=>`vinmonopolet/${r}`})})}),{useGetVinmonopoletCountriesQuery:Z,useGetVinmonopoletWineQuery:B}=$,R=[{value:1,title:"Alle verdier",description:"Henter og erstatter alle verdier"},{value:2,title:"Kun pris",description:"Erstatter kun verdien til pris"},{value:3,title:"Ignorer brukerdetaljer",description:"Henter og erstatter alle verdier untatt brukerdetaljer"}],z=({setValues:t,productId:r,setIsOpen:a,setValue:i,getValues:s,isWishlist:d})=>{const[u,E]=o.exports.useState(!0),[x,L]=o.exports.useState(""),{data:c,...y}=B(x,{skip:u}),[m,w]=o.exports.useState(r||""),[p,j]=o.exports.useState(null),[k,W]=o.exports.useState(1),v=o.exports.useCallback(n=>{if(d)t(n);else if(i&&s)switch(k){case 1:t(n);break;case 2:i("price",n.price);break;case 3:const{userDetails:f,...I}=n;t({...I,userDetails:s("userDetails")});break;default:t(n);break}},[s,d,k,i,t]);o.exports.useEffect(()=>{if(c){const n={...c,file:null,resetImage:!1,userDetails:{...c.userDetails,purchaseDate:null}};v(n),console.log(c),E(!0),a(!1)}},[c,v,a]);const N=n=>{n.code==="Enter"&&g()},V=n=>n?/^\d+$/.test(n):!1,g=async()=>{let n=m.trim();if(n.includes("https://www.vinmonopolet.no/")&&n.includes("/p/")&&(n=n.split("/p/")[1]),!V(n)){j("Error, kunne ikke hente vin med denne produktId'en.");return}L(n),E(!1)};return e.createElement(e.Fragment,null,e.createElement("div",{className:"mb-4"},e.createElement("a",{className:"inline-flex link flex-row gap-x-1.5 items-center px-2 text-sm bg-green-wine-25 hover:bg-green-wine-100 dark:bg-gray-950 py-2 rounded",href:"https://www.vinmonopolet.no/search/?q=:relevance&searchType=product",target:"_blank",rel:"noreferrer"},e.createElement(C,{size:"1.2rem"}),"G\xE5 til Vinmonopolet.no")),e.createElement("div",{className:"p-4 space-y-6 block-less-muted rounded-lg"},e.createElement("div",null,e.createElement("label",{htmlFor:"vinmonopoletProductId",className:"label"},"ProduktId/Link"),e.createElement("input",{className:`text-input text h-12 px-3 text-lg ${p?"border-wine-500 bg-wine-25":""}`,type:"text",name:"vinmonopoletProductId",value:m,autoComplete:"off",placeholder:"produktId",onKeyDown:N,onChange:n=>w(n.target.value)}),p&&e.createElement("em",{className:"form-error"},p)),!d&&e.createElement(h,{className:"space-y-1",value:k,onChange:W},e.createElement(h.Label,{className:"label"},"Velg verdier"),R.map(n=>e.createElement(h.Option,{key:n.value,value:n.value},({checked:f})=>e.createElement("div",{className:`p-3 btn-white rounded font-normal 
                ${f?"bg-blue-wine-500 active:bg-blue-wine-500 dark:bg-blue-wine-500 dark:hover:bg-blue-wine-500 text-slate-50 border border-blue-wine-500 dark:border-blue-wine-200":""} flex flex-row gap-x-2 items-center cursor-pointer select-none`},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"font-medium"},n.title),e.createElement("p",{className:"opacity-60 font-normal text-sm"},n.description)),f&&e.createElement("div",{className:"border-2 border-white rounded-full p-0.5"},e.createElement(P,{size:"1.2rem",weight:"bold"})))))),e.createElement(D,{loadingText:"Henter vin...",disabled:m.length<1,loading:y.isLoading,onClick:g,className:"h-12 w-full rounded-full justify-center"},e.createElement(A,{size:"1.5rem"}),"Hent vin")))},_=({isOpen:t,setIsOpen:r,setValues:a,setValue:i,getValues:s,productId:d,isWishlist:u=!1})=>e.createElement(S,{title:"Hent vin fra Vinmonopolet",description:"Fyll inn produktId eller url fra vinmonopolet",isOpen:t,setIsOpen:r,xl:!0},e.createElement(z,{setIsOpen:r,setValue:i,getValues:s,productId:d,isWishlist:u,setValues:a}));export{_ as V,Z as u};
