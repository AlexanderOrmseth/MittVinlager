import{R as e,r as o,I,a as H,aB as F}from"./index.a6714b1f.js";import{L as M,M as S}from"./vinmonopolet.14fbe23b.js";import{L as C}from"./Link.esm.53893658.js";import{j as E,C as D}from"./radio-group.389c2a8c.js";var l=new Map;l.set("bold",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))});l.set("duotone",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});l.set("fill",function(){return e.createElement(e.Fragment,null,e.createElement("path",{d:"M80.3,115.7a8.2,8.2,0,0,1-1.7-8.7,8,8,0,0,1,7.4-5h34V40a8,8,0,0,1,16,0v62h34a8,8,0,0,1,7.4,5,8.2,8.2,0,0,1-1.7,8.7l-42,42a8.2,8.2,0,0,1-11.4,0ZM216,144a8,8,0,0,0-8,8v56H48V152a8,8,0,0,0-16,0v56a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V152A8,8,0,0,0,216,144Z"}))});l.set("light",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))});l.set("thin",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))});l.set("regular",function(t){return e.createElement(e.Fragment,null,e.createElement("polyline",{points:"86 110 128 152 170 110",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),e.createElement("path",{d:"M216,152v56a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V152",fill:"none",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))});var P=function(r,a){return H(r,a,l)},g=o.exports.forwardRef(function(t,r){return e.createElement(I,Object.assign({ref:r},t,{renderPath:P}))});g.displayName="DownloadSimple";const q=g,A=F.injectEndpoints({endpoints:t=>({getVinmonopoletCountries:t.query({query:()=>"vinmonopolet/countries"}),getVinmonopoletWine:t.query({query:r=>`vinmonopolet/${r}`})})}),{useGetVinmonopoletCountriesQuery:Z,useGetVinmonopoletWineQuery:$}=A,B=[{value:1,title:"Alle verdier",description:"Henter og erstatter alle verdier"},{value:2,title:"Kun pris",description:"Erstatter kun verdien til pris"},{value:3,title:"Ignorer brukerdetaljer",description:"Henter og erstatter alle verdier untatt brukerdetaljer"}],R=({setValues:t,productId:r,setIsOpen:a,setValue:i,getValues:s,isWishlist:c})=>{const[d,h]=o.exports.useState(!0),[x,b]=o.exports.useState(""),{data:u,...L}=$(x,{skip:d}),[m,y]=o.exports.useState(r||""),[p,w]=o.exports.useState(null),[k,j]=o.exports.useState(1),v=o.exports.useCallback(n=>{if(c)t(n);else if(i&&s)switch(k){case 1:t(n);break;case 2:i("price",n.price);break;case 3:const{userDetails:f,...V}=n;t({...V,userDetails:s("userDetails")});break;default:t(n);break}},[s,c,k,i,t]);o.exports.useEffect(()=>{if(u){const n={...u,file:null,resetImage:!1,userDetails:{...u.userDetails,purchaseDate:null}};v(n),console.log(u),h(!0),a(!1)}},[u,v,a]);const W=n=>n?/^\d+$/.test(n):!1,N=async()=>{let n=m.trim();if(n.includes("https://www.vinmonopolet.no/")&&n.includes("/p/")&&(n=n.split("/p/")[1]),!W(n)){w("Error, kunne ikke hente vin med denne produktId'en.");return}b(n),h(!1)};return e.createElement(e.Fragment,null,e.createElement("div",{className:"mb-4"},e.createElement("a",{className:"inline-flex link flex-row gap-x-1.5 items-center px-2 text-sm bg-green-wine-25 hover:bg-green-wine-100 dark:bg-green-wine-25/10 py-2 rounded",href:"https://www.vinmonopolet.no/search/?q=:relevance&searchType=product",target:"_blank",rel:"noreferrer"},e.createElement(C,{size:"1.2rem"}),"G\xE5 til Vinmonopolet.no"),e.createElement("div",{className:"flex flex-row gap-2 my-4 text-slate-600 font-mono"},e.createElement("span",null,"112301"),e.createElement("span",null,"89101"),e.createElement("span",null,"132801"))),e.createElement("div",{className:"p-4 space-y-6 block-less-muted rounded-lg"},e.createElement("div",null,e.createElement("label",{htmlFor:"vinmonopoletProductId",className:"label"},"ProduktId/Link"),e.createElement("input",{className:`text-input text h-12 px-3 text-lg ${p?"border-wine-500 bg-wine-25":""}`,type:"text",name:"vinmonopoletProductId",value:m,autoComplete:"off",placeholder:"produktId",onChange:n=>y(n.target.value)}),p&&e.createElement("p",{className:"text-wine-500 text-sm italic"},p)),!c&&e.createElement(E,{className:"space-y-1",value:k,onChange:j},e.createElement(E.Label,{className:"label"},"Velg verdier"),B.map(n=>e.createElement(E.Option,{key:n.value,value:n.value},({checked:f})=>e.createElement("div",{className:`p-3 btn-white rounded font-normal 
                ${f?"bg-blue-wine-500 active:bg-blue-wine-500 dark:bg-blue-wine-500 dark:hover:bg-blue-wine-500 text-slate-50 border border-blue-wine-500 dark:border-blue-wine-200":""} flex flex-row gap-x-2 items-center cursor-pointer select-none`},e.createElement("div",{className:"flex-1"},e.createElement("p",{className:"font-medium"},n.title),e.createElement("p",{className:"opacity-60 font-normal text-sm"},n.description)),f&&e.createElement("div",{className:"border-2 border-white rounded-full p-0.5"},e.createElement(D,{size:"1.2rem",weight:"bold"})))))),e.createElement(M,{loadingText:"Henter vin...",disabled:m.length<1,loading:L.isLoading,onClick:N,className:"h-12 w-full rounded-full justify-center"},e.createElement(q,{size:"1.5rem"}),"Hent vin")))},_=({isOpen:t,setIsOpen:r,setValues:a,setValue:i,getValues:s,productId:c,isWishlist:d=!1})=>e.createElement(S,{title:"Hent vin fra Vinmonopolet",description:"Fyll inn produktId eller url fra vinmonopolet",isOpen:t,setIsOpen:r,xl:!0},e.createElement(R,{setIsOpen:r,setValue:i,getValues:s,productId:c,isWishlist:d,setValues:a}));export{_ as V,Z as u};
